#!/bin/bash

set -euo pipefail

# Integration test to ensure CI fails when a non-existent repository is added

# set git credentials
git config user.name dfinity
git config user.email dfinity@dfinity.org

# create new branch
git checkout -b integration-test-3

# add a fake repository
touch test.txt
git add test.txt
git commit -m 'add empty file'

# create pull request
git push --set-upstream origin integration-test-3
gh pr create --draft --title "Integration Test 3" --body "generated by integration test from branch $GITHUB_HEAD_REF"
